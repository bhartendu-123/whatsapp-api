"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.initServer = initServer;exports.logger = void 0;















var _wppconnect = require("@wppconnect-team/wppconnect");
var _cors = _interopRequireDefault(require("cors"));
var _express = _interopRequireDefault(require("express"));
var _expressQueryBoolean = _interopRequireDefault(require("express-query-boolean"));
var _http = require("http");
var _mergeDeep = _interopRequireDefault(require("merge-deep"));
var _process = _interopRequireDefault(require("process"));
var _socket = require("socket.io");

var _package = require("../package.json");
var _config = _interopRequireDefault(require("./config"));
var _index = require("./mapper/index");
var _routes = _interopRequireDefault(require("./routes"));
var _functions = require("./util/functions");




var _logger = require("./util/logger"); /*
 * Copyright 2021 WPPConnect Team
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ //require('dotenv').config();
const logger = exports.logger = (0, _logger.createLogger)(_config.default.log);function initServer(serverOptions) {if (typeof serverOptions !== 'object') {serverOptions = {};}serverOptions = (0, _mergeDeep.default)({}, _config.default, serverOptions);_wppconnect.defaultLogger.level = serverOptions.log.level;(0, _functions.setMaxListners)(serverOptions);
  const app = (0, _express.default)();
  const PORT = _process.default.env.PORT || serverOptions.port;

  app.use((0, _cors.default)());
  app.use(_express.default.json({ limit: '50mb' }));
  app.use(_express.default.urlencoded({ limit: '50mb', extended: true }));
  app.use('/files', _express.default.static('WhatsAppImages'));
  app.use((0, _expressQueryBoolean.default)());

  if (_config.default?.aws_s3?.access_key_id && _config.default?.aws_s3?.secret_key) {
    _process.default.env['AWS_ACCESS_KEY_ID'] = _config.default.aws_s3.access_key_id;
    _process.default.env['AWS_SECRET_ACCESS_KEY'] = _config.default.aws_s3.secret_key;
  }

  // Add request options
  app.use((req, res, next) => {
    req.serverOptions = serverOptions;
    req.logger = logger;
    req.io = io;

    const oldSend = res.send;

    res.send = async function (data) {
      const content = req.headers['content-type'];
      if (content == 'application/json') {
        data = JSON.parse(data);
        if (!data.session) data.session = req.client ? req.client.session : '';
        if (data.mapper && req.serverOptions.mapper.enable) {
          data.response = await (0, _index.convert)(
            req.serverOptions.mapper.prefix,
            data.response,
            data.mapper
          );
          delete data.mapper;
        }
      }
      res.send = oldSend;
      return res.send(data);
    };
    next();
  });

  app.use(_routes.default);

  (0, _functions.createFolders)();
  const http = (0, _http.createServer)(app);
  const io = new _socket.Server(http, {
    cors: {
      origin: '*'
    }
  });

  io.on('connection', (sock) => {
    logger.info(`ID: ${sock.id} entrou`);

    sock.on('disconnect', () => {
      logger.info(`ID: ${sock.id} saiu`);
    });
  });

  http.listen(PORT, () => {
    logger.info(`Server is running on port: ${PORT}`);
    logger.info(
      `\x1b[31m Visit ${serverOptions.host}:${PORT}/api-docs for Swagger docs`
    );
    logger.info(`WPPConnect-Server version: ${_package.version}`);

    if (serverOptions.startAllSession) (0, _functions.startAllSessions)(serverOptions, logger);
  });

  if (_config.default.log.level === 'error' || _config.default.log.level === 'warn') {
    console.log(`\x1b[33m ======================================================
Attention:
Your configuration is configured to show only a few logs, before opening an issue, 
please set the log to 'silly', copy the log that shows the error and open your issue.
======================================================
`);
  }

  return {
    app,
    routes: _routes.default,
    logger
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfd3BwY29ubmVjdCIsInJlcXVpcmUiLCJfY29ycyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZXhwcmVzcyIsIl9leHByZXNzUXVlcnlCb29sZWFuIiwiX2h0dHAiLCJfbWVyZ2VEZWVwIiwiX3Byb2Nlc3MiLCJfc29ja2V0IiwiX3BhY2thZ2UiLCJfY29uZmlnIiwiX2luZGV4IiwiX3JvdXRlcyIsIl9mdW5jdGlvbnMiLCJfbG9nZ2VyIiwibG9nZ2VyIiwiZXhwb3J0cyIsImNyZWF0ZUxvZ2dlciIsImNvbmZpZyIsImxvZyIsImluaXRTZXJ2ZXIiLCJzZXJ2ZXJPcHRpb25zIiwibWVyZ2VEZWVwIiwiZGVmYXVsdExvZ2dlciIsImxldmVsIiwic2V0TWF4TGlzdG5lcnMiLCJhcHAiLCJleHByZXNzIiwiUE9SVCIsInByb2Nlc3MiLCJlbnYiLCJwb3J0IiwidXNlIiwiY29ycyIsImpzb24iLCJsaW1pdCIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN0YXRpYyIsImJvb2xQYXJzZXIiLCJhd3NfczMiLCJhY2Nlc3Nfa2V5X2lkIiwic2VjcmV0X2tleSIsInJlcSIsInJlcyIsIm5leHQiLCJpbyIsIm9sZFNlbmQiLCJzZW5kIiwiZGF0YSIsImNvbnRlbnQiLCJoZWFkZXJzIiwiSlNPTiIsInBhcnNlIiwic2Vzc2lvbiIsImNsaWVudCIsIm1hcHBlciIsImVuYWJsZSIsInJlc3BvbnNlIiwiY29udmVydCIsInByZWZpeCIsInJvdXRlcyIsImNyZWF0ZUZvbGRlcnMiLCJodHRwIiwiY3JlYXRlU2VydmVyIiwiU29ja2V0Iiwib3JpZ2luIiwib24iLCJzb2NrIiwiaW5mbyIsImlkIiwibGlzdGVuIiwiaG9zdCIsInZlcnNpb24iLCJzdGFydEFsbFNlc3Npb24iLCJzdGFydEFsbFNlc3Npb25zIiwiY29uc29sZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjEgV1BQQ29ubmVjdCBUZWFtXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGRlZmF1bHRMb2dnZXIgfSBmcm9tICdAd3BwY29ubmVjdC10ZWFtL3dwcGNvbm5lY3QnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcywgeyBOZXh0RnVuY3Rpb24gfSBmcm9tICdleHByZXNzJztcbmltcG9ydCBib29sUGFyc2VyIGZyb20gJ2V4cHJlc3MtcXVlcnktYm9vbGVhbic7XG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXIgfSBmcm9tICdodHRwJztcbmltcG9ydCBtZXJnZURlZXAgZnJvbSAnbWVyZ2UtZGVlcCc7XG5pbXBvcnQgcHJvY2VzcyBmcm9tICdwcm9jZXNzJztcbmltcG9ydCB7IFNlcnZlciBhcyBTb2NrZXQgfSBmcm9tICdzb2NrZXQuaW8nO1xuXG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSAnLi4vcGFja2FnZS5qc29uJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgY29udmVydCB9IGZyb20gJy4vbWFwcGVyL2luZGV4JztcbmltcG9ydCByb3V0ZXMgZnJvbSAnLi9yb3V0ZXMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlRm9sZGVycyxcbiAgc2V0TWF4TGlzdG5lcnMsXG4gIHN0YXJ0QWxsU2Vzc2lvbnMsXG59IGZyb20gJy4vdXRpbC9mdW5jdGlvbnMnO1xuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnLi91dGlsL2xvZ2dlcic7XG5cbi8vcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBjcmVhdGVMb2dnZXIoY29uZmlnLmxvZyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0U2VydmVyKHNlcnZlck9wdGlvbnM6IGFueSkge1xuICBpZiAodHlwZW9mIHNlcnZlck9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgc2VydmVyT3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgc2VydmVyT3B0aW9ucyA9IG1lcmdlRGVlcCh7fSwgY29uZmlnLCBzZXJ2ZXJPcHRpb25zKTtcbiAgZGVmYXVsdExvZ2dlci5sZXZlbCA9IHNlcnZlck9wdGlvbnMubG9nLmxldmVsO1xuXG4gIHNldE1heExpc3RuZXJzKHNlcnZlck9wdGlvbnMpO1xuXG4gIGNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbiAgY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgc2VydmVyT3B0aW9ucy5wb3J0O1xuXG4gIGFwcC51c2UoY29ycygpKTtcbiAgYXBwLnVzZShleHByZXNzLmpzb24oeyBsaW1pdDogJzUwbWInIH0pKTtcbiAgYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBsaW1pdDogJzUwbWInLCBleHRlbmRlZDogdHJ1ZSB9KSk7XG4gIGFwcC51c2UoJy9maWxlcycsIGV4cHJlc3Muc3RhdGljKCdXaGF0c0FwcEltYWdlcycpKTtcbiAgYXBwLnVzZShib29sUGFyc2VyKCkpO1xuXG4gIGlmIChjb25maWc/LmF3c19zMz8uYWNjZXNzX2tleV9pZCAmJiBjb25maWc/LmF3c19zMz8uc2VjcmV0X2tleSkge1xuICAgIHByb2Nlc3MuZW52WydBV1NfQUNDRVNTX0tFWV9JRCddID0gY29uZmlnLmF3c19zMy5hY2Nlc3Nfa2V5X2lkO1xuICAgIHByb2Nlc3MuZW52WydBV1NfU0VDUkVUX0FDQ0VTU19LRVknXSA9IGNvbmZpZy5hd3NfczMuc2VjcmV0X2tleTtcbiAgfVxuXG4gIC8vIEFkZCByZXF1ZXN0IG9wdGlvbnNcbiAgYXBwLnVzZSgocmVxOiBhbnksIHJlczogYW55LCBuZXh0OiBOZXh0RnVuY3Rpb24pID0+IHtcbiAgICByZXEuc2VydmVyT3B0aW9ucyA9IHNlcnZlck9wdGlvbnM7XG4gICAgcmVxLmxvZ2dlciA9IGxvZ2dlcjtcbiAgICByZXEuaW8gPSBpbyBhcyBhbnk7XG5cbiAgICBjb25zdCBvbGRTZW5kID0gcmVzLnNlbmQ7XG5cbiAgICByZXMuc2VuZCA9IGFzeW5jIGZ1bmN0aW9uIChkYXRhOiBhbnkpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSByZXEuaGVhZGVyc1snY29udGVudC10eXBlJ107XG4gICAgICBpZiAoY29udGVudCA9PSAnYXBwbGljYXRpb24vanNvbicpIHtcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIGlmICghZGF0YS5zZXNzaW9uKSBkYXRhLnNlc3Npb24gPSByZXEuY2xpZW50ID8gcmVxLmNsaWVudC5zZXNzaW9uIDogJyc7XG4gICAgICAgIGlmIChkYXRhLm1hcHBlciAmJiByZXEuc2VydmVyT3B0aW9ucy5tYXBwZXIuZW5hYmxlKSB7XG4gICAgICAgICAgZGF0YS5yZXNwb25zZSA9IGF3YWl0IGNvbnZlcnQoXG4gICAgICAgICAgICByZXEuc2VydmVyT3B0aW9ucy5tYXBwZXIucHJlZml4LFxuICAgICAgICAgICAgZGF0YS5yZXNwb25zZSxcbiAgICAgICAgICAgIGRhdGEubWFwcGVyXG4gICAgICAgICAgKTtcbiAgICAgICAgICBkZWxldGUgZGF0YS5tYXBwZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlcy5zZW5kID0gb2xkU2VuZDtcbiAgICAgIHJldHVybiByZXMuc2VuZChkYXRhKTtcbiAgICB9O1xuICAgIG5leHQoKTtcbiAgfSk7XG5cbiAgYXBwLnVzZShyb3V0ZXMpO1xuXG4gIGNyZWF0ZUZvbGRlcnMoKTtcbiAgY29uc3QgaHR0cCA9IGNyZWF0ZVNlcnZlcihhcHApO1xuICBjb25zdCBpbyA9IG5ldyBTb2NrZXQoaHR0cCwge1xuICAgIGNvcnM6IHtcbiAgICAgIG9yaWdpbjogJyonLFxuICAgIH0sXG4gIH0pO1xuXG4gIGlvLm9uKCdjb25uZWN0aW9uJywgKHNvY2spID0+IHtcbiAgICBsb2dnZXIuaW5mbyhgSUQ6ICR7c29jay5pZH0gZW50cm91YCk7XG5cbiAgICBzb2NrLm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgbG9nZ2VyLmluZm8oYElEOiAke3NvY2suaWR9IHNhaXVgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaHR0cC5saXN0ZW4oUE9SVCwgKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKGBTZXJ2ZXIgaXMgcnVubmluZyBvbiBwb3J0OiAke1BPUlR9YCk7XG4gICAgbG9nZ2VyLmluZm8oXG4gICAgICBgXFx4MWJbMzFtIFZpc2l0ICR7c2VydmVyT3B0aW9ucy5ob3N0fToke1BPUlR9L2FwaS1kb2NzIGZvciBTd2FnZ2VyIGRvY3NgXG4gICAgKTtcbiAgICBsb2dnZXIuaW5mbyhgV1BQQ29ubmVjdC1TZXJ2ZXIgdmVyc2lvbjogJHt2ZXJzaW9ufWApO1xuXG4gICAgaWYgKHNlcnZlck9wdGlvbnMuc3RhcnRBbGxTZXNzaW9uKSBzdGFydEFsbFNlc3Npb25zKHNlcnZlck9wdGlvbnMsIGxvZ2dlcik7XG4gIH0pO1xuXG4gIGlmIChjb25maWcubG9nLmxldmVsID09PSAnZXJyb3InIHx8IGNvbmZpZy5sb2cubGV2ZWwgPT09ICd3YXJuJykge1xuICAgIGNvbnNvbGUubG9nKGBcXHgxYlszM20gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5BdHRlbnRpb246XG5Zb3VyIGNvbmZpZ3VyYXRpb24gaXMgY29uZmlndXJlZCB0byBzaG93IG9ubHkgYSBmZXcgbG9ncywgYmVmb3JlIG9wZW5pbmcgYW4gaXNzdWUsIFxucGxlYXNlIHNldCB0aGUgbG9nIHRvICdzaWxseScsIGNvcHkgdGhlIGxvZyB0aGF0IHNob3dzIHRoZSBlcnJvciBhbmQgb3BlbiB5b3VyIGlzc3VlLlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5gKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYXBwLFxuICAgIHJvdXRlcyxcbiAgICBsb2dnZXIsXG4gIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkEsSUFBQUEsV0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsS0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsUUFBQSxHQUFBRCxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUksb0JBQUEsR0FBQUYsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFLLEtBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLFVBQUEsR0FBQUosc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFPLFFBQUEsR0FBQUwsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFRLE9BQUEsR0FBQVIsT0FBQTs7QUFFQSxJQUFBUyxRQUFBLEdBQUFULE9BQUE7QUFDQSxJQUFBVSxPQUFBLEdBQUFSLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBVyxNQUFBLEdBQUFYLE9BQUE7QUFDQSxJQUFBWSxPQUFBLEdBQUFWLHNCQUFBLENBQUFGLE9B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