"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.bucketAlreadyExists = bucketAlreadyExists;var _clientS = require("@aws-sdk/client-s3");

var _ = require("..");
var _config = _interopRequireDefault(require("../config"));

async function bucketAlreadyExists(bucketName) {
  // eslint-disable-next-line no-async-promise-executor
  return new Promise(async (resolve, reject) => {
    const s3Client = new _clientS.S3Client({ region: _config.default.aws_s3.region });

    const command = new _clientS.HeadBucketCommand({ Bucket: bucketName });

    try {
      await s3Client.send(command);
      resolve(true);
    } catch (error) {
      if (error.name === 'NoSuchBucket' || error.name === 'NotFound') {
        resolve(false);
      } else {
        _.logger.error(error);
        reject(error);
      }
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2xpZW50UyIsInJlcXVpcmUiLCJfIiwiX2NvbmZpZyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJidWNrZXRBbHJlYWR5RXhpc3RzIiwiYnVja2V0TmFtZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiczNDbGllbnQiLCJTM0NsaWVudCIsInJlZ2lvbiIsImNvbmZpZyIsImF3c19zMyIsImNvbW1hbmQiLCJIZWFkQnVja2V0Q29tbWFuZCIsIkJ1Y2tldCIsInNlbmQiLCJlcnJvciIsIm5hbWUiLCJsb2dnZXIiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbC9idWNrZXRBbHJlYWR5RXhpc3RzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhlYWRCdWNrZXRDb21tYW5kLCBTM0NsaWVudCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1zMyc7XG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1Y2tldEFscmVhZHlFeGlzdHMoYnVja2V0TmFtZTogc3RyaW5nKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hc3luYy1wcm9taXNlLWV4ZWN1dG9yXG4gIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgczNDbGllbnQgPSBuZXcgUzNDbGllbnQoeyByZWdpb246IGNvbmZpZy5hd3NfczMucmVnaW9uIH0pO1xuXG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBIZWFkQnVja2V0Q29tbWFuZCh7IEJ1Y2tldDogYnVja2V0TmFtZSB9KTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzM0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ05vU3VjaEJ1Y2tldCcgfHwgZXJyb3IubmFtZSA9PT0gJ05vdEZvdW5kJykge1xuICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6ImtOQUFBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTs7QUFFQSxJQUFBQyxDQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7O0FBRU8sZUFBZUksbUJBQW1CQSxDQUFDQyxVQUFrQixFQUFFO0VBQzVEO0VBQ0EsT0FBTyxJQUFJQyxPQUFPLENBQUMsT0FBT0MsT0FBTyxFQUFFQyxNQUFNLEtBQUs7SUFDNUMsTUFBTUMsUUFBUSxHQUFHLElBQUlDLGlCQUFRLENBQUMsRUFBRUMsTUFBTSxFQUFFQyxlQUFNLENBQUNDLE1BQU0sQ0FBQ0YsTUFBTSxDQUFDLENBQUMsQ0FBQzs7SUFFL0QsTUFBTUcsT0FBTyxHQUFHLElBQUlDLDBCQUFpQixDQUFDLEVBQUVDLE1BQU0sRUFBRVgsVUFBVSxDQUFDLENBQUMsQ0FBQzs7SUFFN0QsSUFBSTtNQUNGLE1BQU1JLFFBQVEsQ0FBQ1EsSUFBSSxDQUFDSCxPQUFPLENBQUM7TUFDNUJQLE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDZixDQUFDLENBQUMsT0FBT1csS0FBVSxFQUFFO01BQ25CLElBQUlBLEtBQUssQ0FBQ0MsSUFBSSxLQUFLLGNBQWMsSUFBSUQsS0FBSyxDQUFDQyxJQUFJLEtBQUssVUFBVSxFQUFFO1FBQzlEWixPQUFPLENBQUMsS0FBSyxDQUFDO01BQ2hCLENBQUMsTUFBTTtRQUNMYSxRQUFNLENBQUNGLEtBQUssQ0FBQ0EsS0FBSyxDQUFDO1FBQ25CVixNQUFNLENBQUNVLEtBQUssQ0FBQztNQUNmO0lBQ0Y7RUFDRixDQUFDLENBQUM7QUFDSiJ9